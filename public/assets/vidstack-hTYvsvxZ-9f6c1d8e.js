import{F as c,s as n,e as h,l as a,a as d,G as u,i as g}from"./index-762308d2.js";function f(e,t=3e3){const s=c();return setTimeout(()=>{const i=e();i&&s.reject(i)},t),s}class p{constructor(t){this.wj=t,this.Ag=n(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.wj}setup(t){h(this.od.bind(this)),a(window,"message",this.xj.bind(this)),a(this.wj,"load",this.Pf.bind(this))}od(){const t=this.Ag();if(!t.length){this.wj.setAttribute("src","");return}const s=d(()=>this.Kg());this.wj.setAttribute("src",u(t,s))}Dg(t,s){var i;(i=this.wj.contentWindow)==null||i.postMessage(JSON.stringify(t),s??"*")}xj(t){var o;const s=this.tg();if(t.source===((o=this.wj)==null?void 0:o.contentWindow)&&(!g(s)||s===t.origin)){try{const r=JSON.parse(t.data);r&&this.Pg(r,t);return}catch{}t.data&&this.Pg(t.data,t)}}}export{p as E,f as t};
